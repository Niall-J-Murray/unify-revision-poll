<!-- Generated by SpecStory -->

# Tearing Down Terraform Deployment (2025-05-22 20:20:37)

_**User**_

@terraform-dev 
Tear down this deployment

---

_**Assistant**_

I'll help you tear down the Terraform deployment. Since this is a Terraform-managed infrastructure, we'll use the `terraform destroy` command to safely remove all the resources that were created.

First, let me check if we're in the correct directory and then run the destroy command.


---

```bash
cd /c/Users/Niall/Code/CC_AI/assignments/a2/unify-revision-poll/terraform-dev && terraform destroy -auto-approve
```

```
$
          - ipv4_address_count           = 0 -> null
          - ipv4_addresses               = [] -> null
          - ipv4_prefix_count            = 0 -> null
          - ipv4_prefixes                = [] -> null
          - ipv6_address_count           = 0 -> null
          - ipv6_addresses               = [] -> null
          - ipv6_prefix_count            = 0 -> null
          - ipv6_prefixes                = [] -> null
          - network_card_index           = 0 -> null
          - security_groups              = [
              - "sg-0c091871e820ba939",
            ] -> null
            # (8 unchanged attributes hidden)
        }

      - tag_specifications {
          - resource_type = "instance" -> null
          - tags          = {
              - "ManagedBy" = "Terraform"
              - "Name"      = "feature-poll-ecs-instance"
              - "Project"   = "FeaturePollApp"
            } -> null
        }
    }

  # aws_lb.main will be destroyed
  - resource "aws_lb" "main" {
      - arn                                                          = "arn:aws:
elasticloadbalancing:
eu-west-1:765194364851:loadbalancer/app/feature-poll-alb/bac99ebe435c046f" -> nu
ll                                                                - arn_suffix
                                                 = "app/feature-poll-alb/bac99eb
e
435c046f" -> null
                                                                  - client_keep_
alive                                            = 3600 -> null
      - desync_mitigation_mode                                       = "defensiv
e" -> null
      - dns_name                                                     = "feature-
poll-alb-1808360141.e
u-west-1.elb.amazonaws.com" -> null
                                                                  - drop_invalid
_header_fields                                   = false -> null
      - enable_cross_zone_load_balancing                             = true -> n
ull
      - enable_deletion_protection                                   = false ->
null
      - enable_http2                                                 = true -> n
ull
      - enable_tls_version_and_cipher_suite_headers                  = false ->
null
      - enable_waf_fail_open                                         = false ->
null
      - enable_xff_client_port                                       = false ->
null
      - enable_zonal_shift                                           = false ->
null
      - id                                                           = "arn:aws:
elasticloadbalancing:
eu-west-1:765194364851:loadbalancer/app/feature-poll-alb/bac99ebe435c046f" -> nu
ll                                                                - idle_timeout
                                                 = 60 -> null
      - internal                                                     = false ->
null
      - ip_address_type                                              = "ipv4" ->
 null
      - load_balancer_type                                           = "applicat
ion" -> null
      - name                                                         = "feature-
poll-alb" -> null    
      - preserve_host_header                                         = false ->
null
      - security_groups                                              = [
          - "sg-0a12cd61719218373",
        ] -> null
      - subnets                                                      = [
          - "subnet-04506530299840eee",
          - "subnet-0f371085cc331bc1d",
        ] -> null
      - tags                                                         = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-alb"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all                                                     = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-alb"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id                                                       = "vpc-0e85
63fd12d86af7f" -> nul
l
                                                                  - xff_header_p
rocessing_mode                                   = "append" -> null
      - zone_id                                                      = "Z32O12XQ
LNTSW2" -> null      
        # (3 unchanged attributes hidden)

      - access_logs {
          - enabled = false -> null
            # (2 unchanged attributes hidden)
        }

      - connection_logs {
          - enabled = false -> null
            # (2 unchanged attributes hidden)
        }

      - subnet_mapping {
          - subnet_id            = "subnet-04506530299840eee" -> null
            # (4 unchanged attributes hidden)
        }
      - subnet_mapping {
          - subnet_id            = "subnet-0f371085cc331bc1d" -> null
            # (4 unchanged attributes hidden)
        }
    }

  # aws_lb_listener.http will be destroyed
  - resource "aws_lb_listener" "http" {
      - arn                                                                 = "a
rn:aws:elasticloadbal
ancing:eu-west-1:765194364851:listener/app/feature-poll-alb/bac99ebe435c046f/833
26c8bed00707d" -> nul                                       l

                                              - id
                                    = "arn:aws:elasticloadbal
ancing:eu-west-1:765194364851:listener/app/feature-poll-alb/bac99ebe435c046f/833
26c8bed00707d" -> nul                                       l

                                              - load_balancer_arn
                                    = "arn:aws:elasticloadbal
ancing:eu-west-1:765194364851:loadbalancer/app/feature-poll-alb/bac99ebe435c046f
" -> null                                                         - port
                                                        = 80 -> null
      - protocol                                                            = "H
TTP" -> null
      - routing_http_response_server_enabled                                = fa
lse -> null
      - tags                                                                = {}
 -> null
      - tags_all                                                            = {}
 -> null
        # (11 unchanged attributes hidden)

      - default_action {
          - order            = 1 -> null
          - type             = "redirect" -> null
            # (1 unchanged attribute hidden)

          - redirect {
              - host        = "#{host}" -> null
              - path        = "/#{path}" -> null
              - port        = "443" -> null
              - protocol    = "HTTPS" -> null
              - query       = "#{query}" -> null
              - status_code = "HTTP_301" -> null
            }
        }
    }

  # aws_lb_listener.https will be destroyed
  - resource "aws_lb_listener" "https" {
      - arn                                                                   =
"arn:aws:elasticloadb
alancing:eu-west-1:765194364851:listener/app/feature-poll-alb/bac99ebe435c046f/9
47653a51e08e06d" -> n                                       ull

                                              - certificate_arn
                                      = "arn:aws:acm:eu-west-
1:765194364851:certificate/71c697a8-c875-4036-831b-f42eccc052ff" -> null
                                                                  - id
                                                          = "arn:aws:elasticload
b
alancing:eu-west-1:765194364851:listener/app/feature-poll-alb/bac99ebe435c046f/9
47653a51e08e06d" -> n                                       ull

                                              - load_balancer_arn
                                      = "arn:aws:elasticloadb
alancing:eu-west-1:765194364851:loadbalancer/app/feature-poll-alb/bac99ebe435c04
6f" -> null                                                       - port
                                                          = 443 -> null
      - protocol                                                              =
"HTTPS" -> null      
      - routing_http_response_server_enabled                                  =
false -> null        
      - ssl_policy                                                            =
"ELBSecurityPolicy-20
16-08" -> null
                                                                  - tags
                                                          = {} -> null
      - tags_all                                                              =
{} -> null
        # (18 unchanged attributes hidden)

      - default_action {
          - order            = 1 -> null
          - target_group_arn = "arn:aws:elasticloadbalancing:eu-west-1:765194364
851:targetgroup/featu
re-poll-tg/f93774783433339a" -> null
                                                                      - type
         = "forward" -> null
        }

      - mutual_authentication {
          - ignore_client_certificate_expiry = false -> null
          - mode                             = "off" -> null
            # (2 unchanged attributes hidden)
        }
    }

  # aws_lb_target_group.app will be destroyed
  - resource "aws_lb_target_group" "app" {
      - arn                                = "arn:aws:elasticloadbalancing:eu-we
st-1:765194364851:tar
getgroup/feature-poll-tg/f93774783433339a" -> null
                                                                  - arn_suffix
                       = "targetgroup/feature-poll-tg/f93774783433339a" -> null
 
      - deregistration_delay               = "300" -> null
      - id                                 = "arn:aws:elasticloadbalancing:eu-we
st-1:765194364851:tar
getgroup/feature-poll-tg/f93774783433339a" -> null
                                                                  - ip_address_t
ype                    = "ipv4" -> null
      - lambda_multi_value_headers_enabled = false -> null
      - load_balancer_arns                 = [
          - "arn:aws:elasticloadbalancing:eu-west-1:765194364851:loadbalancer/ap
p/feature-poll-alb/ba
c99ebe435c046f",
                                                                    ] -> null
      - load_balancing_algorithm_type      = "round_robin" -> null
      - load_balancing_anomaly_mitigation  = "off" -> null
      - load_balancing_cross_zone_enabled  = "use_load_balancer_configuration" -
> null
      - name                               = "feature-poll-tg" -> null
      - port                               = 3000 -> null
      - protocol                           = "HTTP" -> null
      - protocol_version                   = "HTTP1" -> null
      - proxy_protocol_v2                  = false -> null
      - slow_start                         = 0 -> null
      - tags                               = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-app-tg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all                           = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-app-tg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - target_type                        = "ip" -> null
      - vpc_id                             = "vpc-0e8563fd12d86af7f" -> null
        # (1 unchanged attribute hidden)

      - health_check {
          - enabled             = true -> null
          - healthy_threshold   = 3 -> null
          - interval            = 30 -> null
          - matcher             = "200" -> null
          - path                = "/api/health" -> null
          - port                = "traffic-port" -> null
          - protocol            = "HTTP" -> null
          - timeout             = 5 -> null
          - unhealthy_threshold = 3 -> null
        }

      - stickiness {
          - cookie_duration = 86400 -> null
          - enabled         = false -> null
          - type            = "lb_cookie" -> null
            # (1 unchanged attribute hidden)
        }

      - target_failover {}

      - target_group_health {
          - dns_failover {
              - minimum_healthy_targets_count      = "1" -> null
              - minimum_healthy_targets_percentage = "off" -> null
            }
          - unhealthy_state_routing {
              - minimum_healthy_targets_count      = 1 -> null
              - minimum_healthy_targets_percentage = "off" -> null
            }
        }

      - target_health_state {}
    }

  # aws_route53_record.app will be destroyed
  - resource "aws_route53_record" "app" {
      - fqdn                             = "feature-poll.murrdev.com" -> null
      - id                               = "Z06510446DIKO4Z3HFIB_feature-poll.mu
rrdev.com_A" -> null 
      - multivalue_answer_routing_policy = false -> null
      - name                             = "feature-poll.murrdev.com" -> null
      - records                          = [] -> null
      - ttl                              = 0 -> null
      - type                             = "A" -> null
      - zone_id                          = "Z06510446DIKO4Z3HFIB" -> null
        # (2 unchanged attributes hidden)

      - alias {
          - evaluate_target_health = true -> null
          - name                   = "feature-poll-alb-1808360141.eu-west-1.elb.
amazonaws.com" -> nul
l
                                                                      - zone_id
               = "Z32O12XQLNTSW2" -> null
        }
    }

  # aws_route_table.public will be destroyed
  - resource "aws_route_table" "public" {
      - arn              = "arn:aws:ec2:eu-west-1:765194364851:route-table/rtb-0
2681c12bb9ea5ba9" -> 
null
      - id               = "rtb-02681c12bb9ea5ba9" -> null
      - owner_id         = "765194364851" -> null
      - propagating_vgws = [] -> null
      - route            = [
          - {
              - cidr_block                 = "0.0.0.0/0"
              - gateway_id                 = "igw-0047322a78005dfae"
                # (11 unchanged attributes hidden)
            },
        ] -> null
      - tags             = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-public-rtb"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all         = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-public-rtb"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id           = "vpc-0e8563fd12d86af7f" -> null
    }

  # aws_route_table_association.public_a will be destroyed
  - resource "aws_route_table_association" "public_a" {
      - id             = "rtbassoc-0a202c6e4c151c82a" -> null
      - route_table_id = "rtb-02681c12bb9ea5ba9" -> null
      - subnet_id      = "subnet-0f371085cc331bc1d" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_route_table_association.public_b will be destroyed
  - resource "aws_route_table_association" "public_b" {
      - id             = "rtbassoc-098b4aeb1c93d4568" -> null
      - route_table_id = "rtb-02681c12bb9ea5ba9" -> null
      - subnet_id      = "subnet-04506530299840eee" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_secretsmanager_secret.app_secrets will be destroyed
  - resource "aws_secretsmanager_secret" "app_secrets" {
      - arn                            = "arn:aws:secretsmanager:eu-west-1:76519
4364851:secret:/featu
re-poll/murrdev.com/app-secrets-v4-jAbBeN" -> null
                                                                  - description
                   = "Application environment variables for feature-poll.murrdev
.
com (v4)" -> null
                                                                  - force_overwr
ite_replica_secret = false -> null
      - id                             = "arn:aws:secretsmanager:eu-west-1:76519
4364851:secret:/featu
re-poll/murrdev.com/app-secrets-v4-jAbBeN" -> null
                                                                  - name
                   = "/feature-poll/murrdev.com/app-secrets-v4" -> null
      - recovery_window_in_days        = 30 -> null
      - tags                           = {
          - "ManagedBy" = "Terraform"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all                       = {
          - "ManagedBy" = "Terraform"
          - "Project"   = "FeaturePollApp"
        } -> null
        # (3 unchanged attributes hidden)
    }

  # aws_secretsmanager_secret_version.app_secrets_version will be destroyed
  - resource "aws_secretsmanager_secret_version" "app_secrets_version" {
      - arn              = "arn:aws:secretsmanager:eu-west-1:765194364851:secret
:/feature-poll/murrde
v.com/app-secrets-v4-jAbBeN" -> null
                                                                  - id
     = "arn:aws:secretsmanager:eu-west-1:765194364851:secret:/feature-poll/murrd
e
v.com/app-secrets-v4-jAbBeN|terraform-20250416132305801100000003" -> null
                                                                  - secret_id
     = "arn:aws:secretsmanager:eu-west-1:765194364851:secret:/feature-poll/murrd
e
v.com/app-secrets-v4-jAbBeN" -> null
                                                                  - secret_strin
g    = (sensitive value) -> null
      - secret_string_wo = (write-only attribute) -> null
      - version_id       = "terraform-20250416132305801100000003" -> null
      - version_stages   = [
          - "AWSCURRENT",
        ] -> null
        # (1 unchanged attribute hidden)
    }

  # aws_security_group.bastion_host will be destroyed
  - resource "aws_security_group" "bastion_host" {
      - arn                    = "arn:aws:ec2:eu-west-1:765194364851:security-gr
oup/sg-07b67d90b27eb7
bdd" -> null
                                                                  - description
           = "Allow SSH inbound from admin and all outbound" -> null
      - egress                 = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - from_port        = 0
              - ipv6_cidr_blocks = [
                  - "::/0",
                ]
              - prefix_list_ids  = []
              - protocol         = "-1"
              - security_groups  = []
              - self             = false
              - to_port          = 0
                # (1 unchanged attribute hidden)
            },
        ] -> null
      - id                     = "sg-07b67d90b27eb7bdd" -> null
      - ingress                = [
          - {
              - cidr_blocks      = [
                  - "37.228.206.81/32",
                ]
              - description      = "SSH from Admin IPs"
              - from_port        = 22
              - ipv6_cidr_blocks = [
                  - "2a02:8084:4461:b880:d8fa:ccb2:403:955/128",
                ]
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = []
              - self             = false
              - to_port          = 22
            },
        ] -> null
      - name                   = "feature-poll-bastion-host-sg" -> null
      - owner_id               = "765194364851" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-bastion-host-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all               = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-bastion-host-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id                 = "vpc-0e8563fd12d86af7f" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_security_group.ecs_instance will be destroyed
  - resource "aws_security_group" "ecs_instance" {
      - arn                    = "arn:aws:ec2:eu-west-1:765194364851:security-gr
oup/sg-0c091871e820ba
939" -> null
                                                                  - description
           = "Allow traffic from ALB and outbound access for ECS instances" -> n
u
ll
                                                                  - egress
           = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - from_port        = 0
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "-1"
              - security_groups  = []
              - self             = false
              - to_port          = 0
                # (1 unchanged attribute hidden)
            },
        ] -> null
      - id                     = "sg-0c091871e820ba939" -> null
      - ingress                = [
          - {
              - cidr_blocks      = []
              - description      = "App traffic from ALB"
              - from_port        = 3000
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = [
                  - "sg-0a12cd61719218373",
                ]
              - self             = false
              - to_port          = 3000
            },
        ] -> null
      - name                   = "feature-poll-ecs-instance-sg" -> null
      - owner_id               = "765194364851" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-ecs-instance-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all               = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-ecs-instance-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id                 = "vpc-0e8563fd12d86af7f" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_security_group.ecs_task will be destroyed
  - resource "aws_security_group" "ecs_task" {
      - arn                    = "arn:aws:ec2:eu-west-1:765194364851:security-gr
oup/sg-03b6df9cb1276d
c7b" -> null
                                                                  - description
           = "Allow traffic from ALB to ECS tasks" -> null
      - egress                 = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - description      = "Allow all other outbound traffic"
              - from_port        = 0
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "-1"
              - security_groups  = []
              - self             = false
              - to_port          = 0
            },
        ] -> null
      - id                     = "sg-03b6df9cb1276dc7b" -> null
      - ingress                = [
          - {
              - cidr_blocks      = []
              - description      = "App traffic from ALB"
              - from_port        = 3000
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = [
                  - "sg-0a12cd61719218373",
                ]
              - self             = false
              - to_port          = 3000
            },
        ] -> null
      - name                   = "feature-poll-ecs-task-sg" -> null
      - owner_id               = "765194364851" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-ecs-task-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all               = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-ecs-task-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id                 = "vpc-0e8563fd12d86af7f" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_security_group.lb will be destroyed
  - resource "aws_security_group" "lb" {
      - arn                    = "arn:aws:ec2:eu-west-1:765194364851:security-gr
oup/sg-0a12cd61719218
373" -> null
                                                                  - description
           = "Allow HTTP/HTTPS inbound traffic to ALB" -> null
      - egress                 = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - from_port        = 0
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "-1"
              - security_groups  = []
              - self             = false
              - to_port          = 0
                # (1 unchanged attribute hidden)
            },
        ] -> null
      - id                     = "sg-0a12cd61719218373" -> null
      - ingress                = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - description      = "HTTP from anywhere"
              - from_port        = 80
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = []
              - self             = false
              - to_port          = 80
            },
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - description      = "HTTPS from anywhere"
              - from_port        = 443
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = []
              - self             = false
              - to_port          = 443
            },
        ] -> null
      - name                   = "feature-poll-lb-sg" -> null
      - owner_id               = "765194364851" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-lb-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all               = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-lb-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id                 = "vpc-0e8563fd12d86af7f" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_security_group.rds will be destroyed
  - resource "aws_security_group" "rds" {
      - arn                    = "arn:aws:ec2:eu-west-1:765194364851:security-gr
oup/sg-01aeab97fa81fb
384" -> null
                                                                  - description
           = "Allow traffic from ECS tasks to RDS instance" -> null
      - egress                 = [] -> null
      - id                     = "sg-01aeab97fa81fb384" -> null
      - ingress                = [
          - {
              - cidr_blocks      = []
              - description      = "PostgreSQL from Bastion host"
              - from_port        = 5432
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = [
                  - "sg-07b67d90b27eb7bdd",
                ]
              - self             = false
              - to_port          = 5432
            },
          - {
              - cidr_blocks      = []
              - description      = "PostgreSQL from ECS tasks"
              - from_port        = 5432
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = [
                  - "sg-03b6df9cb1276dc7b",
                ]
              - self             = false
              - to_port          = 5432
            },
        ] -> null
      - name                   = "feature-poll-rds-sg" -> null
      - owner_id               = "765194364851" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-rds-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all               = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-rds-sg"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_id                 = "vpc-0e8563fd12d86af7f" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_subnet.private_a will be destroyed
  - resource "aws_subnet" "private_a" {
      - arn                                            = "arn:aws:ec2:eu-west-1:
765194364851:subnet/s
ubnet-05e375bfe663a12e6" -> null
                                                                  - assign_ipv6_
address_on_creation                = false -> null
      - availability_zone                              = "eu-west-1a" -> null
      - availability_zone_id                           = "euw1-az3" -> null
      - cidr_block                                     = "10.0.2.0/24" -> null
      - enable_dns64                                   = false -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = false -> null
      - id                                             = "subnet-05e375bfe663a12
e6" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "765194364851" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-private-subnet-euw1-az3"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Private"
        } -> null
      - tags_all                                       = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-private-subnet-euw1-az3"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Private"
        } -> null
      - vpc_id                                         = "vpc-0e8563fd12d86af7f"
 -> null
        # (4 unchanged attributes hidden)
    }

  # aws_subnet.private_b will be destroyed
  - resource "aws_subnet" "private_b" {
      - arn                                            = "arn:aws:ec2:eu-west-1:
765194364851:subnet/s
ubnet-0bddfcd91d929090d" -> null
                                                                  - assign_ipv6_
address_on_creation                = false -> null
      - availability_zone                              = "eu-west-1b" -> null
      - availability_zone_id                           = "euw1-az1" -> null
      - cidr_block                                     = "10.0.4.0/24" -> null
      - enable_dns64                                   = false -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = false -> null
      - id                                             = "subnet-0bddfcd91d92909
0d" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "765194364851" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-private-subnet-euw1-az1"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Private"
        } -> null
      - tags_all                                       = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-private-subnet-euw1-az1"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Private"
        } -> null
      - vpc_id                                         = "vpc-0e8563fd12d86af7f"
 -> null
        # (4 unchanged attributes hidden)
    }

  # aws_subnet.public_a will be destroyed
  - resource "aws_subnet" "public_a" {
      - arn                                            = "arn:aws:ec2:eu-west-1:
765194364851:subnet/s
ubnet-0f371085cc331bc1d" -> null
                                                                  - assign_ipv6_
address_on_creation                = false -> null
      - availability_zone                              = "eu-west-1a" -> null
      - availability_zone_id                           = "euw1-az3" -> null
      - cidr_block                                     = "10.0.1.0/24" -> null
      - enable_dns64                                   = false -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = false -> null
      - id                                             = "subnet-0f371085cc331bc
1d" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = true -> null
      - owner_id                                       = "765194364851" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-public-subnet-euw1-az3"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Public"
        } -> null
      - tags_all                                       = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-public-subnet-euw1-az3"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Public"
        } -> null
      - vpc_id                                         = "vpc-0e8563fd12d86af7f"
 -> null
        # (4 unchanged attributes hidden)
    }

  # aws_subnet.public_b will be destroyed
  - resource "aws_subnet" "public_b" {
      - arn                                            = "arn:aws:ec2:eu-west-1:
765194364851:subnet/s
ubnet-04506530299840eee" -> null
                                                                  - assign_ipv6_
address_on_creation                = false -> null
      - availability_zone                              = "eu-west-1b" -> null
      - availability_zone_id                           = "euw1-az1" -> null
      - cidr_block                                     = "10.0.3.0/24" -> null
      - enable_dns64                                   = false -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = false -> null
      - id                                             = "subnet-04506530299840e
ee" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = true -> null
      - owner_id                                       = "765194364851" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-public-subnet-euw1-az1"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Public"
        } -> null
      - tags_all                                       = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-public-subnet-euw1-az1"
          - "Project"   = "FeaturePollApp"
          - "Tier"      = "Public"
        } -> null
      - vpc_id                                         = "vpc-0e8563fd12d86af7f"
 -> null
        # (4 unchanged attributes hidden)
    }

  # aws_vpc.main will be destroyed
  - resource "aws_vpc" "main" {
      - arn                                  = "arn:aws:ec2:eu-west-1:7651943648
51:vpc/vpc-0e8563fd12
d86af7f" -> null
                                                                  - assign_gener
ated_ipv6_cidr_block     = false -> null
      - cidr_block                           = "10.0.0.0/16" -> null
      - default_network_acl_id               = "acl-0569d0d2b293348aa" -> null
      - default_route_table_id               = "rtb-0287fa77934268324" -> null
      - default_security_group_id            = "sg-07d4ead286549b40b" -> null
      - dhcp_options_id                      = "dopt-0ea3a7673b1751f23" -> null
      - enable_dns_hostnames                 = true -> null
      - enable_dns_support                   = true -> null
      - enable_network_address_usage_metrics = false -> null
      - id                                   = "vpc-0e8563fd12d86af7f" -> null
      - instance_tenancy                     = "default" -> null
      - ipv6_netmask_length                  = 0 -> null
      - main_route_table_id                  = "rtb-0287fa77934268324" -> null
      - owner_id                             = "765194364851" -> null
      - tags                                 = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-vpc"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all                             = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-vpc"
          - "Project"   = "FeaturePollApp"
        } -> null
        # (4 unchanged attributes hidden)
    }

  # aws_vpc_endpoint.s3 will be destroyed
  - resource "aws_vpc_endpoint" "s3" {
      - arn                        = "arn:aws:ec2:eu-west-1:765194364851:vpc-end
point/vpce-0f0269f974
15354bf" -> null
                                                                  - cidr_blocks
               = [
          - "3.5.64.0/21",
          - "3.5.72.0/23",
          - "52.92.0.0/17",
          - "52.218.0.0/17",
        ] -> null
      - dns_entry                  = [] -> null
      - id                         = "vpce-0f0269f97415354bf" -> null
      - network_interface_ids      = [] -> null
      - owner_id                   = "765194364851" -> null
      - policy                     = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "*"
                      - Effect    = "Allow"
                      - Principal = "*"
                      - Resource  = "*"
                    },
                ]
              - Version   = "2008-10-17"
            }
        ) -> null
      - prefix_list_id             = "pl-6da54004" -> null
      - private_dns_enabled        = false -> null
      - requester_managed          = false -> null
      - route_table_ids            = [] -> null
      - security_group_ids         = [] -> null
      - service_name               = "com.amazonaws.eu-west-1.s3" -> null
      - state                      = "available" -> null
      - subnet_ids                 = [] -> null
      - tags                       = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-s3-gateway-endpoint"
          - "Project"   = "FeaturePollApp"
        } -> null
      - tags_all                   = {
          - "ManagedBy" = "Terraform"
          - "Name"      = "feature-poll-s3-gateway-endpoint"
          - "Project"   = "FeaturePollApp"
        } -> null
      - vpc_endpoint_type          = "Gateway" -> null
      - vpc_id                     = "vpc-0e8563fd12d86af7f" -> null
        # (4 unchanged attributes hidden)
    }

Plan: 0 to add, 0 to change, 38 to destroy.

Changes to Outputs:
  - app_url                  = "https://feature-poll.murrdev.com" -> null
  - bastion_host_instance_id = "i-00941486bd2a84493" -> null
  - bastion_public_ip        = "34.253.95.203" -> null
  - db_endpoint              = "feature-poll-db.c72euymwgjn7.eu-west-1.rds.amazo
naws.com:5432" -> nul
l
                                                              - ecr_repository_u
rl       = "765194364851.dkr.ecr.eu-west-1.amazonaws.com/feature-poll-app-repo"
-
> null
                                                              - rds_endpoint
         = "feature-poll-db.c72euymwgjn7.eu-west-1.rds.amazonaws.com:5432" -> nu
l
l
                                                              - secret_arns
         = "arn:aws:secretsmanager:eu-west-1:765194364851:secret:/feature-poll/m
u
rrdev.com/app-secrets-v4-jAbBeN" -> null
                                                              - terraform_caller
_arn     = "arn:aws:iam::765194364851:root" -> null
aws_iam_role_policy_attachment.ecs_task_execution_policy: Destroying... [id=feat
ure-poll-ecs-task-exe
cution-role-20250416122811721200000003]
                                                            aws_iam_role_policy_
attachment.ecs_instance_policy: Destroying... [id=feature-poll-ecs-instance-role
-
20250416122811531900000002]
                                                            aws_iam_role_policy_
attachment.secrets_manager_access_attach: Destroying... [id=feature-poll-ecs-tas
k
-execution-role-20250416131652878300000002]
                                                            aws_route_table_asso
ciation.public_b: Destroying... [id=rtbassoc-098b4aeb1c93d4568]
aws_route53_record.app: Destroying... [id=Z06510446DIKO4Z3HFIB_feature-poll.murr
dev.com_A]
aws_lb_listener.https: Destroying... [id=arn:aws:elasticloadbalancing:eu-west-1:
765194364851:listener
/app/feature-poll-alb/bac99ebe435c046f/947653a51e08e06d]
                                                            aws_lb_listener.http
: Destroying... [id=arn:aws:elasticloadbalancing:eu-west-1:765194364851:listener
/
app/feature-poll-alb/bac99ebe435c046f/83326c8bed00707d]
                                                            aws_ecs_task_definit
ion.app: Destroying... [id=feature-poll-app-task]
aws_autoscaling_group.ecs_asg: Destroying... [id=feature-poll-ecs-asg-2025041612
2834425700000009]    
aws_instance.bastion_host: Destroying... [id=i-00941486bd2a84493]
aws_ecs_task_definition.app: Destruction complete after 0s
aws_route_table_association.public_a: Destroying... [id=rtbassoc-0a202c6e4c151c8
2a]
aws_lb_listener.http: Destruction complete after 0s
aws_vpc_endpoint.s3: Destroying... [id=vpce-0f0269f97415354bf]
aws_lb_listener.https: Destruction complete after 0s
aws_secretsmanager_secret_version.app_secrets_version: Destroying... [id=arn:aws
:secretsmanager:eu-we
st-1:765194364851:secret:/feature-poll/murrdev.com/app-secrets-v4-jAbBeN|terrafo
rm-202504161323058011                                       00000003]

                                        aws_route_table_association.public_b: De
struction complete after 0s
aws_ecr_repository.app: Destroying... [id=feature-poll-app-repo]
aws_secretsmanager_secret_version.app_secrets_version: Destruction complete afte
r 0s
aws_cloudwatch_log_group.app_logs: Destroying... [id=/ecs/feature-poll-app]
aws_route_table_association.public_a: Destruction complete after 0s
aws_lb_target_group.app: Destroying... [id=arn:aws:elasticloadbalancing:eu-west-
1:765194364851:target
group/feature-poll-tg/f93774783433339a]
                                                            aws_db_instance.main
: Destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU]
aws_cloudwatch_log_group.app_logs: Destruction complete after 0s
aws_route_table.public: Destroying... [id=rtb-02681c12bb9ea5ba9]
aws_lb_target_group.app: Destruction complete after 0s
aws_iam_role_policy_attachment.secrets_manager_access_attach: Destruction comple
te after 0s
aws_iam_role_policy_attachment.ecs_task_execution_policy: Destruction complete a
fter 0s
aws_iam_policy.secrets_manager_access: Destroying... [id=arn:aws:iam::7651943648
51:policy/feature-pol
l-secrets-manager-access-policy]
                                                            aws_iam_role_policy_
attachment.ecs_instance_policy: Destruction complete after 1s
aws_iam_role.ecs_task_execution_role: Destroying... [id=feature-poll-ecs-task-ex
ecution-role]        
aws_route_table.public: Destruction complete after 1s
aws_internet_gateway.gw: Destroying... [id=igw-0047322a78005dfae]
aws_iam_policy.secrets_manager_access: Destruction complete after 1s
aws_secretsmanager_secret.app_secrets: Destroying... [id=arn:aws:secretsmanager:
eu-west-1:76519436485
1:secret:/feature-poll/murrdev.com/app-secrets-v4-jAbBeN]
                                                            aws_secretsmanager_s
ecret.app_secrets: Destruction complete after 0s
aws_iam_role.ecs_task_execution_role: Destruction complete after 0s
aws_vpc_endpoint.s3: Destruction complete after 5s
aws_route53_record.app: Still destroying... [id=Z06510446DIKO4Z3HFIB_feature-pol
l.murrdev.com_A, 10s 
elapsed]
aws_instance.bastion_host: Still destroying... [id=i-00941486bd2a84493, 10s elap
sed]
aws_autoscaling_group.ecs_asg: Still destroying... [id=feature-poll-ecs-asg-2025
041612283442570000000
9, 10s elapsed]
                                                            aws_db_instance.main
: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 10s elapsed]
aws_internet_gateway.gw: Still destroying... [id=igw-0047322a78005dfae, 10s elap
sed]
aws_autoscaling_group.ecs_asg: Destruction complete after 16s
aws_launch_template.ecs_launch_template: Destroying... [id=lt-0cf795e7e108d8ef6]
aws_launch_template.ecs_launch_template: Destruction complete after 0s
aws_iam_instance_profile.ecs_instance_profile: Destroying... [id=feature-poll-ec
s-instance-profile]
aws_ecs_cluster.main: Destroying... [id=arn:aws:ecs:eu-west-1:765194364851:clust
er/feature-poll-clust
er]
                                                            aws_security_group.e
cs_instance: Destroying... [id=sg-0c091871e820ba939]
aws_ecs_cluster.main: Destruction complete after 1s
aws_iam_instance_profile.ecs_instance_profile: Destruction complete after 1s
aws_iam_role.ecs_instance_role: Destroying... [id=feature-poll-ecs-instance-role
]
aws_security_group.ecs_instance: Destruction complete after 1s
aws_iam_role.ecs_instance_role: Destruction complete after 0s
aws_route53_record.app: Still destroying... [id=Z06510446DIKO4Z3HFIB_feature-pol
l.murrdev.com_A, 20s 
elapsed]
aws_instance.bastion_host: Still destroying... [id=i-00941486bd2a84493, 20s elap
sed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 20s
 elapsed]
aws_internet_gateway.gw: Still destroying... [id=igw-0047322a78005dfae, 20s elap
sed]
aws_route53_record.app: Still destroying... [id=Z06510446DIKO4Z3HFIB_feature-pol
l.murrdev.com_A, 30s 
elapsed]
aws_instance.bastion_host: Still destroying... [id=i-00941486bd2a84493, 30s elap
sed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 30s
 elapsed]
aws_internet_gateway.gw: Still destroying... [id=igw-0047322a78005dfae, 30s elap
sed]
aws_route53_record.app: Destruction complete after 32s
aws_lb.main: Destroying... [id=arn:aws:elasticloadbalancing:eu-west-1:7651943648
51:loadbalancer/app/f
eature-poll-alb/bac99ebe435c046f]
                                                            aws_instance.bastion
_host: Still destroying... [id=i-00941486bd2a84493, 40s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 40s
 elapsed]
aws_internet_gateway.gw: Still destroying... [id=igw-0047322a78005dfae, 40s elap
sed]
aws_lb.main: Still destroying... [id=arn:aws:elasticloadbalancing:eu-west-1:.../
app/feature-poll-alb/
bac99ebe435c046f, 10s elapsed]
                                                            aws_lb.main: Destruc
tion complete after 17s
aws_subnet.public_b: Destroying... [id=subnet-04506530299840eee]
aws_instance.bastion_host: Still destroying... [id=i-00941486bd2a84493, 50s elap
sed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 50s
 elapsed]
aws_internet_gateway.gw: Still destroying... [id=igw-0047322a78005dfae, 50s elap
sed]
aws_subnet.public_b: Destruction complete after 4s
aws_internet_gateway.gw: Destruction complete after 57s
aws_instance.bastion_host: Still destroying... [id=i-00941486bd2a84493, 1m0s ela
psed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 1m0
s elapsed]
aws_instance.bastion_host: Destruction complete after 1m1s
aws_subnet.public_a: Destroying... [id=subnet-0f371085cc331bc1d]
aws_subnet.public_a: Destruction complete after 0s
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 1m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 1m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 1m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 1m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 1m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 2m0
s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 2m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 2m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 2m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 2m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 2m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 3m0
s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 3m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 3m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 3m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 3m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 3m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 4m0
s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 4m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 4m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 4m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 4m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 4m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 5m0
s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 5m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 5m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 5m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 5m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 5m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 6m0
s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 6m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 6m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 6m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 6m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 6m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 7m0
s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 7m1
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 7m2
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 7m3
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 7m4
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 7m5
0s elapsed]
aws_db_instance.main: Still destroying... [id=db-AULU25BOOOZVR6H2SK4SLYHKJU, 8m0
s elapsed]
aws_db_instance.main: Destruction complete after 8m5s
aws_db_subnet_group.rds: Destroying... [id=feature-poll-rds-subnet-group]
aws_security_group.rds: Destroying... [id=sg-01aeab97fa81fb384]
aws_db_subnet_group.rds: Destruction complete after 0s
aws_subnet.private_b: Destroying... [id=subnet-0bddfcd91d929090d]
aws_subnet.private_a: Destroying... [id=subnet-05e375bfe663a12e6]
aws_security_group.rds: Destruction complete after 1s
aws_security_group.bastion_host: Destroying... [id=sg-07b67d90b27eb7bdd]
aws_security_group.ecs_task: Destroying... [id=sg-03b6df9cb1276dc7b]
aws_subnet.private_b: Destruction complete after 1s
aws_subnet.private_a: Destruction complete after 1s
aws_security_group.bastion_host: Destruction complete after 0s
aws_security_group.ecs_task: Destruction complete after 0s
aws_security_group.lb: Destroying... [id=sg-0a12cd61719218373]
aws_security_group.lb: Destruction complete after 1s
aws_vpc.main: Destroying... [id=vpc-0e8563fd12d86af7f]
aws_vpc.main: Destruction complete after 1s

 Error: ECR Repository (feature-poll-app-repo) not empty, consider using force_
delete: operation error ECR: DeleteRepository, https respons
e error StatusCode: 400, RequestID: b6906007-99b7-4e22-84c3-bd07efae4f3a, Reposi
toryNotEmptyException: The repository with name 'feature-poll-app-repo' in regis
try with id '765194364851' cannot be deleted because it still contains images
                                        



```

---

I notice that most of the infrastructure has been successfully destroyed, but there's one remaining issue: the ECR repository still contains images and needs to be force deleted. Let me help you clean that up.


---

```bash
aws ecr delete-repository --repository-name feature-poll-app-repo --force
```

```
$ aws ecr delete-repository --repository-name feature-poll-app-repo --force
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-west-1:765194364851:repository/feature-poll-app-repo",
        "registryId": "765194364851",
        "repositoryName": "feature-poll-app-repo",
        "repositoryUri": "765194364851.dkr.ecr.eu-west-1.amazonaws.com/feature-poll-app-repo",
        "createdAt": "2025-04-16T13:28:03.935000+01:00",
        "imageTagMutability": "MUTABLE"
    }
}


```

---

Now let's run the terraform destroy command again to clean up any remaining resources:


---

```bash
terraform destroy -auto-approve
```

```
$ terraform destroy -auto-approve
data.aws_availability_zone.az_a: Reading...
data.aws_ami.ecs_optimized_ami: Reading...
data.aws_route53_zone.selected: Reading...
aws_ecr_repository.app: Refreshing state... [id=feature-poll-app-repo]
data.aws_availability_zone.az_b: Reading...
data.aws_caller_identity.current: Reading...
data.aws_availability_zones.available: Reading...
data.aws_ami.amazon_linux_2023: Reading...
data.aws_caller_identity.current: Read complete after 0s [id=765194364851]
data.aws_availability_zone.az_a: Read complete after 0s [id=eu-west-1a]
data.aws_availability_zones.available: Read complete after 0s [id=eu-west-1]
data.aws_availability_zone.az_b: Read complete after 0s [id=eu-west-1b]     
data.aws_ami.ecs_optimized_ami: Read complete after 0s [id=ami-00477f2b78a5e6a8a]
data.aws_ami.amazon_linux_2023: Read complete after 0s [id=ami-06bd3809b296a48ba]
data.aws_route53_zone.selected: Read complete after 1s [id=Z06510446DIKO4Z3HFIB]

Changes to Outputs:
  - app_url              = "https://feature-poll.murrdev.com" -> null
  - terraform_caller_arn = "arn:aws:iam::765194364851:root" -> null

You can apply this plan to save these new output values to the Terraform state, without changing any real infrastructure.

Destroy complete! Resources: 0 destroyed.

```

---

Great! The infrastructure has been successfully torn down. Here's a summary of what was done:

1. First `terraform destroy` command removed most of the infrastructure including:
   - VPC and subnets
   - Security groups
   - Load balancer and target groups
   - ECS cluster and task definitions
   - RDS instance
   - Route53 records
   - IAM roles and policies
   - Secrets Manager secrets
   - CloudWatch log groups

2. We had to force delete the ECR repository because it contained images

3. The final `terraform destroy` command cleaned up the remaining state and outputs

All AWS resources have been successfully removed. The infrastructure has been completely torn down.

---

